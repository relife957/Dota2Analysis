{"remainingRequest":"/Users/wangyi/github/Dota2Analysis/dota2/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wangyi/github/Dota2Analysis/dota2/src/views/Recommend.vue?vue&type=style&index=0&id=7b71922a&scoped=true&lang=css&","dependencies":[{"path":"/Users/wangyi/github/Dota2Analysis/dota2/src/views/Recommend.vue","mtime":1587811177457},{"path":"/Users/wangyi/github/Dota2Analysis/dota2/node_modules/css-loader/dist/cjs.js","mtime":1586596768565},{"path":"/Users/wangyi/github/Dota2Analysis/dota2/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1586596769047},{"path":"/Users/wangyi/github/Dota2Analysis/dota2/node_modules/postcss-loader/src/index.js","mtime":1586596768919},{"path":"/Users/wangyi/github/Dota2Analysis/dota2/node_modules/cache-loader/dist/cjs.js","mtime":1586596768445},{"path":"/Users/wangyi/github/Dota2Analysis/dota2/node_modules/vue-loader/lib/index.js","mtime":1586596769047}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5oZWFkZXJJbWcgewogIGJhY2tncm91bmQ6IHVybCgiaHR0cHM6Ly93d3cuZG90YTIuY29tLmNuL2NvdmVyLzE5MDQyOS9sYXllcjMucG5nP3Y9MjAxOTA1MTMwIikKICAgIG5vLXJlcGVhdCBjZW50ZXIgMDsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDIzNXB4OwogIGJhY2tncm91bmQtY29sb3I6IGJsdWV2aW9sZXQ7CiAgbWFyZ2luOiBhdXRvOwogIHRleHQtYWxpZ246IGNlbnRlcjsKfQo="},{"version":3,"sources":["Recommend.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Recommend.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"headerImg\" />\n    <br />\n    <br />\n\n    <a-select\n      mode=\"multiple\"\n      :value=\"value\"\n      placeholder=\"输入选择你要查询的阵容\"\n      style=\"width: 70%;margin: 0 auto;display: block\"\n      :filterOption=\"false\"\n      @search=\"fetchUser\"\n      @change=\"handleChange\"\n      :notFoundContent=\"fetching ? undefined : null\"\n      size=\"large\"\n    >\n      <a-spin v-if=\"fetching\" slot=\"notFoundContent\" size=\"small\" />\n      <Option v-for=\"d in data\" :key=\"d.value\">{{d.text}}</Option>\n    </a-select>\n    <br />\n    <br />\n\n    <a-button\n      type=\"primary\"\n      icon=\"search\"\n      style=\"margin: auto;display: block;\"\n      size=\"large\"\n      @click=\"recommend\"\n    >推荐</a-button>\n    <br />\n    <a-row type=\"flex\">\n      <a-col :span=\"6\" v-for=\"hero in heroes\" :key=\"hero.heroId\">\n        <a-card hoverable style=\"width: 250px\" type=\"inner\">\n          <img alt=\"example\" :src=\"hero.img\" slot=\"cover\" />\n          <a-card-meta :title=\"hero.cnName\">\n            <template slot=\"description\">\n              <div >\n                <a-tag color=\"#2db7f5\" v-for=\"item in hero.cnRoles.split(',')\" :key=\"item\" >\n                  {{item}}</a-tag>\n              </div>\n\n            </template>\n          </a-card-meta>\n        </a-card>\n      </a-col>\n    </a-row>\n  </div>\n</template>\n<script>\nimport request from \"../util/request\";\nimport {\n  Select,\n  Spin,\n  notification,\n  Button,\n  Card,\n  Row,\n  Col,\n  Tag\n} from \"ant-design-vue\";\nconst Option = Select.Option;\nconst Meta = Card.Meta;\nimport debounce from \"lodash/debounce\";\nexport default {\n  components: {\n    ASelect: Select,\n    ASpin: Spin,\n    Option,\n    AButton: Button,\n    ACard: Card,\n    ACardMeta: Meta,\n    ARow: Row,\n    ACol: Col,\n    ATag: Tag\n  },\n  data() {\n    this.lastFetchId = 0;\n    this.fetchUser = debounce(this.fetchUser, 800);\n\n    return {\n      data: [],\n      value: [],\n      fetching: false,\n      heroes: []\n      // note: {\n      // backgroundImage: \"url(\" + require(\"../assets/background.png\") + \")\",\n      // backgroundRepeat: \"no-repeat\",\n      // backgroundSize: \"100% 100%\"\n      // }\n    };\n  },\n  methods: {\n    fetchUser(value) {\n      if (this.value.length == 4) {\n        this.openNotification(\n          \"超过查询输入上限\",\n          \"本推荐系统只允许输入1-4个英雄\"\n        );\n        return;\n      }\n      this.lastFetchId += 1;\n      const fetchId = this.lastFetchId;\n      this.data = [];\n      this.fetching = true;\n      const url = \"http://localhost:8080/heroinfo/query?keyname=\".concat(value);\n      request({\n        url: url,\n        methods: \"get\"\n      })\n        .then(response => response.data)\n        .then(body => {\n          if (fetchId !== this.lastFetchId) {\n            // for fetch callback order\n            return;\n          }\n          const data = body.map(hero => ({\n            text: `${hero.cnName} `,\n            value: hero.cnName\n          }));\n          this.data = data;\n          this.fetching = false;\n        });\n    },\n    handleChange(value) {\n      Object.assign(this, {\n        value,\n        data: [],\n        fetching: false\n      });\n    },\n    openNotification(msg, des) {\n      notification.open({\n        message: msg,\n        description: des,\n        style: {\n          width: \"600px\",\n          marginLeft: `${335 - 600}px`\n        }\n      });\n    },\n    recommend() {\n      let params = \"\";\n      const len = this.value.length;\n      for (let i = 0; i < len; i++) {\n        if (i != this.value - 1) {\n          params = params.concat(this.value[i]).concat(\" \");\n        } else {\n          params = params.concat(this.value[i]);\n        }\n      }\n      request({\n        url: \"http://localhost:8080/team/recommend\",\n        methods: \"get\",\n        params: {\n          teams: params\n        }\n      })\n        .then(response => response.data)\n        .then(body => {\n          this.heroes = body;\n  \n        });\n    },\n    deal_data() {\n      for (let i = 0; i < this.heroes.length; i++) {\n        var hero = this.heroes[i];\n        hero.cnRoles = hero.cnRoles.replace(/\\[|]/g, \"\").replace(/\\\"/g,\"\");\n        this.heroes[i] = hero;\n      }\n    }\n  }\n};\n</script>\n<style scoped>\n.headerImg {\n  background: url(\"https://www.dota2.com.cn/cover/190429/layer3.png?v=201905130\")\n    no-repeat center 0;\n  width: 100%;\n  height: 235px;\n  background-color: blueviolet;\n  margin: auto;\n  text-align: center;\n}\n</style>\n\n"]}]}