<!DOCTYPE html>
<html xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <title>Vue </title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--vue-->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <!--vue.js resource-->
    <script src="https://cdn.bootcss.com/vue-resource/1.5.1/vue-resource.min.js"></script>
    <!--添加foxholder-->
    <style>
        a{
            font-family: Arial,Helvetica,sans-serif;
            font-size: 20px;
            font-weight: bold;
            color: dimgrey;
            display: block ;
            width: 65%
        }
    </style>
</head>
<body>
<div class="container" id="app">
    <br>
    <br>
    <br>
    <div class="col-lg-6 center-block">
        <div class="input-group input-group-lg">
            <input type="text" class="form-control" id="team"  placeholder="input your team..." v-model="team">
            <span class="input-group-btn">
                <button class="btn btn-primary" type="button" v-on:click="get()">Go!</button>
      </span>
        </div><!-- /input-group -->
    </div><!-- /.col-lg-6 -->
    <br>
    <br>
    <br>
    <div class="list-group center-block">
        <a href="#" class="list-group-item " style="background-color: lightgreen">{{hero_1}}</a>
        <a href="#" class="list-group-item " style="background-color: lightblue">{{hero_2}}</a>
        <a href="#" class="list-group-item " style="background-color: lightcyan">{{hero_3}}</a>
        <a href="#" class="list-group-item " style="background-color: lemonchiffon">{{hero_4}}</a>
        <a href="#" class="list-group-item " style="background-color: lightsalmon">{{hero_5}}</a>
    </div>
</div>
<script>
    new Vue({
        el: '#app',
        data: {
            team:'',
            hero_1:"暂无",
            hero_2:"暂无",
            hero_3:"暂无",
            hero_4:"暂无",
            hero_5:"暂无",
            cn_hero:{},
            all_group : []
        },
        mounted:function(){
            this.get_cn_hero_name() ;
        },
        methods:{
            get:function () {
                const url = "http://localhost:3000/dota2?team=eq.".concat(this.team);
                this.$http.get(url).then(function (res) {
                    const heroes = res.data[0].recommend;
                    const hero_values = heroes.split(" ");
                    for (let i = 0 ; i < hero_values.length; i++){
                        switch (i){
                            case 0:
                                this.hero_1 = this.cn_hero[hero_values[i]];
                                break;
                            case 1:
                                this.hero_2=this.cn_hero[hero_values[i]];
                                break;
                            case 2:
                                this.hero_3=this.cn_hero[hero_values[i]];
                                break;
                            case 3:
                                this.hero_4=this.cn_hero[hero_values[i]];
                                break;
                            case 4:
                                this.hero_5=this.cn_hero[hero_values[i]];
                                break;
                        }
                    }
                },function (res) {
                    console.log("failure")
                });
            },
            get_cn_hero_name : function () {
                this.$http.get('../static/cn_heroes_name.json').then(res=>{
                    const heroes = res.body.data;
                    console.log(heroes);
                    let hero_id;
                    let cn_name;
                    for (let i = 0; i < heroes.length; i++) {
                        hero_id = heroes[i]['hero_id'].toString();
                        cn_name = heroes[i]['cn_name'];
                        this.cn_hero[hero_id] = cn_name;
                    }
                    console.log('加载');
                },function (res) {
                    console.log("parse failure")
                });
            },
            show:function () {
                alert(this.cn_hero['2'])
            },
            get_arrgement:function (heroes) {
                // const heroes = "3 2 5 6";
                const hero_list = heroes.split(" ");
                var all = [] ;
                let index = 0 ;
                perm(hero_list,0,hero_list.length) ;
                function perm(array,k,array_size) {
                    if(k >= array_size){
                        let res = "";
                        for (let i = 0 ; i < array_size ;i++){
                            res = res.concat(array[i]).concat(" ")
                        }
                        all[index++] = res.trim() ;
                    }else{
                        for(let i = k ; i < array_size ;i++){
                            swap(array,k,i);
                            perm(array,k+1,array_size);
                            swap(array,k,i);
                        }
                    }
                    function swap(array,i,j) {
                        const temp = array[i];
                        array[i] = array[j];
                        array[j] = temp;
                    }
                }
                this.all_group = all ;
            }
        }
    });
</script>
</body>
</html>