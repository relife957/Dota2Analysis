<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- 新 Bootstrap 核心 CSS 文件 -->
    <link href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css" >
    <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!--vue-->
    <script src="https://unpkg.com/vue/dist/vue.js"></script>
    <!--vue.js resource-->
    <script src="https://cdn.bootcss.com/vue-resource/1.5.1/vue-resource.min.js"></script>
</head>
<body>
<div class="container" id="random">
    <div class="jumbotron">
        <h1>{{ poem }}</h1>
    </div>
    <div class="panel panel-primary">
        <div class="panel-heading">
            <h3 class="panel-title">Poetry</h3>
        </div>
        <div class="panel-body">
        <ul class="list-group ">
            <li class="list-group-item list-group-item-info" v-for="poetry in poetries">
                {{poetry}}
            </li>
        </ul>
        </div>
    </div>
</div>
<script>
    new Vue({
        el: '#random',
        data : {
            poem:"",
            poetries:[]
        },
        mounted:function () {
            this.get_poem();
            this.get_poetry();
            this.get_arrgement() ;
        },
        methods: {
            get_poem: function () {
                var url = "http://api.apiopen.top/singlePoetry";
                this.$http.get(url).then(function (res) {
                    this.poem = res.data.result['content']
                }, function (res) {
                    console.log(res)
                });
            },
            get_poetry:function () {
                var url = "http://api.apiopen.top/recommendPoetry";
                this.$http.get(url).then(function (res) {
                    this.poetries = this.deal(res.data.result['content'])
                },function (res) {
                    console.log(res)
                })
            },
            deal:function (string) {
                var result = string.trim().split('|');
                return result ;
            },
            get_arrgement:function () {
                const heroes = "3 2 5 6";
                const hero_list = heroes.split(" ");
                var all = [] ;
                let index = 0 ;
                perm(hero_list,0,4) ;
                function perm(array,k,array_size) {
                    if(k >= array_size){
                        var res = "" ;
                        for (let i = 0 ; i < array_size ;i++){
                            res = res.concat(array[i]).concat(" ")
                        }
                        all[index++] = res.trim() ;
                    }else{
                        for(let i = k ; i < array_size ;i++){
                            swap(array,k,i);
                            perm(array,k+1,array_size);
                            swap(array,k,i);
                        }
                    }
                    function swap(array,i,j) {
                        var temp = array[i];
                        array[i] = array[j];
                        array[j] = temp;
                    }
                }
                alert(all);
            }
        }
    });
</script>
</body>
</html>